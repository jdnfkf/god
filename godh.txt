loadstring([[
-- ==============================================
-- Robloxæ‰‹æœºç«¯æ¨¡å—åŒ–æ— æ•Œ+åŸåœ°å¤æ´»è„šæœ¬ï¼ˆè¶…é•¿ç‰ˆï¼‰
-- æ ¸å¿ƒï¼šç‹¬ç«‹åŠŸèƒ½æ¨¡å—å°è£… + æ‰‹æœºç«¯æ·±åº¦é€‚é…
-- ==============================================
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer

-- ===================== å…¨å±€é…ç½®æ¨¡å— =====================
local Config = {
    MODULE_NAME = "GodModeCoreModule", -- åŠŸèƒ½æ¨¡å—åç§°
    GOD_MODE_ENABLED = true,
    AUTO_RESPAWN_ENABLED = true,
    SAFE_POS_UPDATE_INTERVAL = 0.15, -- ä½ç½®æ›´æ–°é—´éš”ï¼ˆæ‰‹æœºç«¯ä¼˜åŒ–ï¼‰
    RESPAWN_HEIGHT_OFFSET = 2.5, -- å¤æ´»é˜²å¡åœ°é«˜åº¦
    CHARACTER_LOAD_DELAY = 0.9, -- æ‰‹æœºç«¯è§’è‰²åŠ è½½å»¶è¿Ÿ
    LOG_ENABLED = true,
    VERSION = "v3.1.2 (Mobile Module Edition)"
}

-- ===================== æ—¥å¿—å·¥å…·æ¨¡å— =====================
local LogSystem = {
    Print = function(message, level)
        if not Config.LOG_ENABLED then return end
        level = level or "INFO"
        local timestamp = os.date("%H:%M:%S")
        print(string.format("[%s][%s][%s] %s", timestamp, Config.MODULE_NAME, level, message))
    end,
    Success = function(message)
        LogSystem.Print(message, "SUCCESS")
    end,
    Warn = function(message)
        LogSystem.Print(message, "WARN")
    end
}

-- ===================== æ ¸å¿ƒåŠŸèƒ½æ¨¡å—åˆ›å»º =====================
local function CreateCoreModule()
    -- æ£€æŸ¥å¹¶æ¸…ç†æ—§æ¨¡å—
    local oldModule = Workspace:FindFirstChild(Config.MODULE_NAME)
    if oldModule then
        oldModule:Destroy()
        LogSystem.Warn("æ—§åŠŸèƒ½æ¨¡å—å·²æ¸…ç†ï¼Œå¯åŠ¨æ–°ç‰ˆæœ¬æ¨¡å—")
    end

    -- åˆ›å»ºæ–°åŠŸèƒ½æ¨¡å—ï¼ˆå­˜æ”¾æ‰€æœ‰æ ¸å¿ƒé€»è¾‘ï¼‰
    local CoreModule = Instance.new("ModuleScript")
    CoreModule.Name = Config.MODULE_NAME
    CoreModule.Parent = Workspace
    LogSystem.Print("åŠŸèƒ½æ¨¡å—åˆ›å»ºæˆåŠŸï¼š" .. CoreModule.Name)

    -- ===================== æ¨¡å—å†…åŠŸèƒ½1ï¼šå®æ—¶è®°å½•å®‰å…¨ä½ç½® =====================
    local PositionRecorder = {
        LastSafePos = nil,
        UpdateTimer = 0,

        Init = function()
            LogSystem.Print("ä½ç½®è®°å½•å­æ¨¡å—åˆå§‹åŒ–")
            -- å¿ƒè·³æ£€æµ‹æ›´æ–°å®‰å…¨ä½ç½®
            RunService.Heartbeat:Connect(function(deltaTime)
                if not Config.GOD_MODE_ENABLED then return end
                self.UpdateTimer = self.UpdateTimer + deltaTime
                if self.UpdateTimer >= Config.SAFE_POS_UPDATE_INTERVAL then
                    self:UpdateSafePosition()
                    self.UpdateTimer = 0
                end
            end)
        end,

        UpdateSafePosition = function(self)
            local character = LocalPlayer.Character
            if not character then return end
            local humanoid = character:FindFirstChild("Humanoid")
            local hrp = character:FindFirstChild("HumanoidRootPart")
            if humanoid and hrp and humanoid.Health > 0 then
                self.LastSafePos = hrp.Position
                LogSystem.Print("å®‰å…¨ä½ç½®æ›´æ–°ï¼š" .. tostring(self.LastSafePos), "DEBUG")
            end
        end,

        GetLastSafePos = function(self)
            return self.LastSafePos or Vector3.new(0, Config.RESPAWN_HEIGHT_OFFSET, 0)
        end
    }

    -- ===================== æ¨¡å—å†…åŠŸèƒ½2ï¼šæ— æ•Œ+ç¦ç”¨æ­»äº¡æœºåˆ¶ =====================
    local GodModeSystem = {
        HumanoidConn = nil,

        Init = function()
            LogSystem.Print("æ— æ•Œå­æ¨¡å—åˆå§‹åŒ–")
            self:BindGodModeToCharacter()
            -- è§’è‰²åˆ‡æ¢æ—¶é‡æ–°ç»‘å®š
            LocalPlayer.CharacterAdded:Connect(function()
                task.wait(Config.CHARACTER_LOAD_DELAY)
                self:BindGodModeToCharacter()
            end)
        end,

        BindGodModeToCharacter = function(self)
            local character = LocalPlayer.Character
            if not character then return end
            local humanoid = character:FindFirstChild("Humanoid")
            if not humanoid then return end

            -- ç¦ç”¨æ­»äº¡ç›¸å…³è®¾ç½®
            humanoid.BreakJointsOnDeath = false
            humanoid:SetStateEnabled(Enum.HumanoidStateType.Dead, false)
            LogSystem.Print("è§’è‰²æ— æ•ŒçŠ¶æ€ç»‘å®šæˆåŠŸ")

            -- å¼ºåˆ¶ç»´æŒæ»¡è¡€é‡
            if self.HumanoidConn then self.HumanoidConn:Disconnect() end
            self.HumanoidConn = RunService.Heartbeat:Connect(function()
                if Config.GOD_MODE_ENABLED and humanoid.Health > 0 then
                    humanoid.Health = humanoid.MaxHealth
                end
            end)
        end
    }

    -- ===================== æ¨¡å—å†…åŠŸèƒ½3ï¼šåŸåœ°è‡ªåŠ¨å¤æ´» =====================
    local AutoRespawnSystem = {
        RespawnConn = nil,

        Init = function()
            LogSystem.Print("åŸåœ°å¤æ´»å­æ¨¡å—åˆå§‹åŒ–")
            self:BindRespawnToCharacter()
            -- è§’è‰²åˆ‡æ¢æ—¶é‡æ–°ç»‘å®š
            LocalPlayer.CharacterAdded:Connect(function()
                task.wait(Config.CHARACTER_LOAD_DELAY)
                self:BindRespawnToCharacter()
            end)
        end,

        BindRespawnToCharacter = function(self)
            local character = LocalPlayer.Character
            if not character then return end
            local humanoid = character:FindFirstChild("Humanoid")
            local hrp = character:FindFirstChild("HumanoidRootPart")
            if not humanoid or not hrp then return end

            -- æ­»äº¡åè§¦å‘åŸåœ°å¤æ´»
            if self.RespawnConn then self.RespawnConn:Disconnect() end
            self.RespawnConn = humanoid.Died:Connect(function()
                if Config.AUTO_RESPAWN_ENABLED and Config.GOD_MODE_ENABLED then
                    task.wait(0.1)
                    local safePos = PositionRecorder:GetLastSafePos()
                    -- å¼ºåˆ¶å¤æ´»+ä¼ é€è‡³å®‰å…¨ä½ç½®
                    humanoid.Health = humanoid.MaxHealth
                    hrp.CFrame = CFrame.new(safePos + Vector3.new(0, Config.RESPAWN_HEIGHT_OFFSET, 0))
                    humanoid:ChangeState(Enum.HumanoidStateType.Running)
                    LogSystem.Success("å·²åŸåœ°å¤æ´»ï¼Œä¼ é€è‡³å®‰å…¨ä½ç½®")
                end
            end)
        end
    }

    -- ===================== æ¨¡å—å†…åˆå§‹åŒ–å…¥å£ =====================
    local function ModuleInit()
        LogSystem.Print("æ ¸å¿ƒåŠŸèƒ½æ¨¡å—å¼€å§‹åˆå§‹åŒ–æ‰€æœ‰å­æ¨¡å—")
        -- åˆå§‹åŒ–ä¸‰å¤§æ ¸å¿ƒå­æ¨¡å—
        PositionRecorder:Init()
        GodModeSystem:Init()
        AutoRespawnSystem:Init()
        LogSystem.Success("æ‰€æœ‰æ ¸å¿ƒå­æ¨¡å—åˆå§‹åŒ–å®Œæˆ")
        LogSystem.Success("æ¨¡å—åŠŸèƒ½æ¸…å•ï¼š")
        LogSystem.Success("1. å®æ—¶è®°å½•å®‰å…¨ä½ç½®ï¼Œæ­»äº¡åè‡ªåŠ¨ä¼ é€å›åŸä½ç½®")
        LogSystem.Success("2. å¼ºåˆ¶ç»´æŒæ»¡è¡€é‡ï¼Œç¦ç”¨æ¸¸æˆæ­»äº¡æœºåˆ¶")
        LogSystem.Success("3. è§’è‰²åˆ‡æ¢åè‡ªåŠ¨é‡æ–°ç»‘å®šåŠŸèƒ½")
    end

    -- æ‰§è¡Œæ¨¡å—åˆå§‹åŒ–
    ModuleInit()

    -- å°†æ ¸å¿ƒåŠŸèƒ½æŒ‚è½½åˆ°æ¨¡å—ï¼Œæ”¯æŒå¤–éƒ¨è°ƒç”¨ï¼ˆå†—ä½™æ‰©å±•ï¼‰
    CoreModule:SetAttribute("PositionRecorder", PositionRecorder)
    CoreModule:SetAttribute("GodModeSystem", GodModeSystem)
    CoreModule:SetAttribute("AutoRespawnSystem", AutoRespawnSystem)
    CoreModule:SetAttribute("Config", Config)

    return CoreModule
end

-- ===================== æ‰‹æœºç«¯ä¸“å±æç¤ºæ¨¡å— =====================
local MobileUIHint = {
    ShowStartupHint = function()
        local ScreenGui = Instance.new("ScreenGui")
        ScreenGui.Name = "MobileModuleHint"
        ScreenGui.Parent = game:GetService("CoreGui")
        ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

        -- æç¤ºæ¡†ä¸»ä½“
        local MainFrame = Instance.new("Frame")
        MainFrame.Size = UDim2.new(0.9, 0, 0.3, 0)
        MainFrame.Position = UDim2.new(0.05, 0, 0.6, 0)
        MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
        MainFrame.BackgroundTransparency = 0.25
        MainFrame.BorderSizePixel = 0
        MainFrame.Parent = ScreenGui

        -- è£…é¥°å…ƒç´ ï¼ˆå†—ä½™ç¾åŒ–ï¼‰
        local UICorner = Instance.new("UICorner")
        UICorner.CornerRadius = UDim.new(0, 15)
        UICorner.Parent = MainFrame

        local UIGradient = Instance.new("UIGradient")
        UIGradient.Color = ColorSequence.new({
            ColorSequenceKeypoint.new(0, Color3.fromRGB(40, 40, 40)),
            ColorSequenceKeypoint.new(1, Color3.fromRGB(10, 10, 10))
        })
        UIGradient.Parent = MainFrame

        -- æç¤ºæ–‡å­—
        local HintText = Instance.new("TextLabel")
        HintText.Size = UDim2.new(1, 0, 1, 0)
        HintText.BackgroundTransparency = 1
        HintText.Text = "âœ… æ¨¡å—åŒ–è„šæœ¬å¯åŠ¨æˆåŠŸ\nğŸ“Œ åŠŸèƒ½æ¨¡å—å·²åˆ›å»ºï¼š" .. Config.MODULE_NAME .. "\n\næ ¸å¿ƒåŠŸèƒ½ï¼š\nâ€¢ å®‰å…¨ä½ç½®è®°å½•+åŸåœ°å¤æ´»\nâ€¢ å…¨ç¨‹æ»¡è¡€é‡+ç¦ç”¨æ­»äº¡\nâ€¢ è§’è‰²åˆ‡æ¢è‡ªåŠ¨é€‚é…"
        HintText.TextColor3 = Color3.fromRGB(255, 255, 255)
        HintText.TextScaled = true
        HintText.Font = Enum.Font.Gotham
        HintText.TextStrokeTransparency = 0.7
        HintText.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
        HintText.Parent = MainFrame

        -- æ‰‹æœºç«¯é€‚é…ï¼š6ç§’åæ¸å˜æ¶ˆå¤±
        task.wait(6)
        for i = 1, 15 do
            MainFrame.BackgroundTransparency = MainFrame.BackgroundTransparency + 0.05
            HintText.TextTransparency = HintText.TextTransparency + 0.06
            task.wait(0.1)
        end
        ScreenGui:Destroy()
    end
}

-- ===================== ä¸»ç¨‹åºå…¥å£ =====================
local function Main()
    LogSystem.Print("è„šæœ¬å¯åŠ¨ä¸­ï¼Œç‰ˆæœ¬ï¼š" .. Config.VERSION)
    LogSystem.Print("æ­£åœ¨åˆ›å»ºæ ¸å¿ƒåŠŸèƒ½æ¨¡å—...")
    
    -- åˆ›å»ºæ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼ˆæ•´åˆä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½ï¼‰
    local CoreModule = CreateCoreModule()
    if CoreModule then
        LogSystem.Success("æ ¸å¿ƒåŠŸèƒ½æ¨¡å—åˆ›å»ºæˆåŠŸï¼Œå·²æŒ‚è½½è‡³Workspace")
    else
        LogSystem.Warn("æ ¸å¿ƒåŠŸèƒ½æ¨¡å—åˆ›å»ºå¤±è´¥ï¼Œå°†é‡è¯•ä¸€æ¬¡")
        task.wait(0.5)
        CoreModule = CreateCoreModule()
    end

    -- æ˜¾ç¤ºæ‰‹æœºç«¯å¯åŠ¨æç¤º
    MobileUIHint:ShowStartupHint()

    -- å†—ä½™éªŒè¯ï¼šæ£€æŸ¥æ¨¡å—åŠŸèƒ½å¯ç”¨æ€§
    task.wait(1)
    local moduleCheck = Workspace:FindFirstChild(Config.MODULE_NAME)
    if moduleCheck then
        LogSystem.Success("è„šæœ¬å¯åŠ¨å®Œæˆï¼Œæ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œï¼ˆæ‰‹æœºç«¯é€‚é…ï¼‰")
    else
        LogSystem.Warn("æ¨¡å—éªŒè¯å¤±è´¥ï¼Œä½†æ ¸å¿ƒåŠŸèƒ½å·²åå°å¯åŠ¨")
    end
end

-- æ‰§è¡Œä¸»ç¨‹åº
Main()
]])()
